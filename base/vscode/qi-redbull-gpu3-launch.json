{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "(gdb) vnr_int_isosurface",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_isosurface",
            "args": [
                // "--simple-volume", "configs/scene_bonsai.json", 
                // "--neural-volume=mechhand-20220926010852-params.json", 
                "--neural-volume=1atmheatrelease-20220916175751-params.json", 
                // "--neural-volume=params.json", 
                "--isovalue", "0.5"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":2"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                },
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) vnr_int_dual",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_dual",
            "args": [
                "--rendering-mode", "0",
                // "--pause-reference",
                // "--pause-inference",
                // "--pause-training",
                "--volume", 
                // "configs/scene_chameleon.json",
                "configs/scene_beechnut.json",
                // "configs/scene_mechhand.json",
                "--network",
                "${workspaceFolder}/data/example-model.json"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":2"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) vnr_int_single",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_single",
            "args": [
                "--rendering-mode", "0",
                // "--simple-volume", "configs/scene_bonsai.json", 
                // "--neural-volume=mechhand-20220926010852-params.json", 
                // "--neural-volume=1atmheatrelease-20220916175751-params.json"
                // "--neural-volume=/mnt/scratch/fast0/qadwu/dvnr/build/Debug/model.json"
                // "--neural-volume=/opt/nfs/home/qadwu/Work/instant-vnr-pytorch/output.json"
                "--simple-volume=configs/scene_heatrelease_1atm.json", 
                "--tfn=configs/scene_heatrelease_1atm.json"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":2"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Render Batch",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/renderbatch",
            "args": [
                "--scene", "configs/scene_mechhand_closeup.json",
                "--num-frames", "16", "--pt", "--spp", "512"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/weishen/USD/lib:/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d:${env:LD_LIBRARY_PATH}"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Render App",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/renderapp",
            "args": [
                // "configs/scene_mechhand.json",
                // "configs/scene_chameleon.json",
                // "configs/scene_woodbranch.json",
                // "configs/scene_beechnut.json",
                "configs/scene_rotstrat_temperature.json",
                // "${input:device}",
                "nncache"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}"
                },
                {
                    "name": "DISPLAY",
                    "value": ":2"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            // "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description":  "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {            
            "name": "(gdb) Render Shadow",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/generate_shadow_map",
            "args": [
                "configs/scene_mechhand.json",
                // "configs/scene_chameleon.json",
                // "shadowmap.usda",
                "--random-lights", "5",
                // "--random-tfn"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/weishen/USD/lib:/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}"
                },
                {
                    "name": "DISPLAY",
                    "value": ":2"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description":  "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        }
    ],
    "inputs": [
        {
            "type": "pickString",
            "id": "device",
            "description": "Which mini app do you want to run?",
            "options": [
                "optix7",
                "ospray",
                "vidi3d",
                "nncache",
                "nnvolume",
                "vulkan",
                "isosurface",
                "gradient"
            ]
        }
    ]
}
