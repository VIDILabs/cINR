{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "(gdb) vnr_int_isosurface",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_isosurface",
            "args": [
                "--simple-volume", "configs/scene_bonsai.json", 
                // "--neural-volume=vorts-params.json", 
                // "--simple-volume=/media/data/qadwu/volume/s3d_cases/temp_ptj.json",
                "--isovalue", "0.5"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":4"
                },
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) vnr_int_dual",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_dual",
            "args": [
                // "--mode", "OUT_OF_CORE",
                // "--rendering-mode", "14",
                "--rendering-mode", "5",
                // "--pause-reference",
                "--pause-inference",
                "--pause-training",
                "--volume", 
                // "configs/scene_chameleon.json",
                "configs/scene_mechhand.json",
                // "/media/data/qadwu/volume/s3d_cases/temp_ptj.json",
                "--network",
                "${workspaceFolder}/projects/instantvnr/apps/example-model.json"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":4"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) vnr_int_compare",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_single",
            "args": [
                "--rendering-mode=5",
                "--neural-volume=${workspaceFolder}/projects/instantvnr/apps/rm60_instantvnr.json",
                // "--neural-volume=${workspaceFolder}/projects/instantvnr/apps/rm60_fvsrn.json",
                "--tfn=${workspaceFolder}/projects/instantvnr/apps/rm60_tfn.json"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":4"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) vnr_int_single",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/vnr_int_single",
            "args": [
                // "--rendering-mode", "5",
                "--rendering-mode", "14",
                // "--neural-volume=params.json",
                // "--neural-volume=/home/qadwu/model.json",
                "--simple-volume=configs/scene_mechhand.json",
                "--tfn=configs/scene_mechhand.json"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "DISPLAY",
                    "value": ":4"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                },
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "${workspaceFolder}/build/${command:cmake.buildType}:${env:LD_LIBRARY_PATH}"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/home/qadwu/vglgdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Batch Rendering",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/renderbatch",
            "args": [
                "--scene", "configs/scene_mechhand_closeup.json",
                "--num-frames", "16", "--pt", "--spp", "512"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/weishen/USD/lib:/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d"
                    // "value": "/home/weishen/USD/lib:/home/qadwu/Work/ospray/build/${command:cmake.buildType}/install/lib:/home/qadwu/Work/ospray/deps/lib:/home/qadwu/Work/ospray/deps/lib/intel64/gcc4.8:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) Render App",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/renderapp",
            "args": [
                "configs/scene_mechhand.json",
                // "configs/scene_chameleon.json",
                // "/media/data/qadwu/volume/s3d_cases/temp_ptj.json",
                "${input:device}",
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/weishen/USD/lib:/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d"
                    // "value": "/home/weishen/USD/lib:/home/qadwu/Work/ospray/build/${command:cmake.buildType}/install/lib:/home/qadwu/Work/ospray/deps/lib:/home/qadwu/Work/ospray/deps/lib/intel64/gcc4.8:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d"
                },
                {
                    "name": "DISPLAY",
                    "value": ":4"
                },
                {
                    "name": "CUDA_VISIBLE_DEVICES",
                    "value": "1"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description":  "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {            
            "name": "(gdb) Render Shadow",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/generate_shadow_map",
            "args": [
                "configs/scene_mechhand.json",
                // "configs/scene_chameleon.json",
                // "shadowmap.usda",
                "--random-lights", "5",
                // "--random-tfn"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/weishen/USD/lib:/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d:${env:LD_LIBRARY_PATH}"
                },
                {
                    "name": "DISPLAY",
                    "value": ":4"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description":  "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(gdb) FolVolNet",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/${command:cmake.buildType}/renderfolvolnet",
            "args": [
                "configs/scene_mechhand.json",
                "../projects/fovolnet/ovrmodule/models/rt_stbn_of40_int8fp16.trt"
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/data",
            "environment": [
                // {
                //     "name": "LD_LIBRARY_PATH",
                //     "value": "/home/weishen/USD/lib:/home/qadwu/Work/ospray/build/${command:cmake.buildType}/install/lib:/home/qadwu/Work/ospray/deps/lib:/home/qadwu/Work/ospray/deps/lib/intel64/gcc4.8:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}:${workspaceFolder}/build/${command:cmake.buildType}/common/vidi3d"
                // },
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "/home/qadwu/Software/ospray-2.11.0.x86_64.linux_sparse_sampling/lib:${env:LD_LIBRARY_PATH}:${workspaceFolder}/build/${command:cmake.buildType}"
                },
                {
                    "name": "DISPLAY",
                    "value": ":4"
                }
            ],
            "externalConsole": false,
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description":  "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        }
    ],
    "inputs": [
        {
            "type": "pickString",
            "id": "miniapp",
            "description": "Which mini app do you want to run?",
            "options": [
                "exp_mini_ospray",
                "exp_mini_optix7",
                "exp_mini_torch",
            ]
        },
        {
            "type": "pickString",
            "id": "device",
            "description": "Which mini app do you want to run?",
            "options": [
                "optix7",
                "ospray",
                "vidi3d",
                "cudapt",
                "nncache",
                "nnvolume",
            ]
        }
    ]
}
